{% extends 'auth/base-auth.html' %}
{% block title %}
    Registro
{% endblock %}
{% block content %}
    <div class="container">
        <div class="row">
            <div class="mx-auto mt-5 mb-5" id="login-container">
                <!-- Logo -->
                <img class="mb-3 mx-auto d-block" src="{{ url_for('static', filename='img/logo-login.png') }}" alt="Logo" width="117" height="55">
                <!-- Título -->
                <h1 class="h3 mb-3 text-center fw-normal">Nueva cuenta</h1>
                <!-- Formulario -->
                <form class="form-signin m-auto needs-validation" action="{{url_for('auth.register')}}" method="POST" novalidate>
                    <!-- Inputs del formulario -->
                    <div class="form-floating">
                        <input type="text" class="form-control" id="nombre-completo" placeholder="Ingresa tu nombre completo" name="nombreCompleto" required>
                        <label for="nombre-completo" class="form-label col-form-label-sm">Nombre completo</label>
                        <div class="invalid-feedback">
                            Ingrese su nombre completo
                        </div>
                    </div>
                    
                    <div class="form-floating">
                        <input type="text" class="form-control" id="nombre-usuario" placeholder="Elige un nombre de usuario" name="nombreUsuario" required>
                        <label for="nombre-usuario" class="form-label col-form-label-sm">Usuario</label>
                        <div class="invalid-feedback">
                            Ingrese un nombre de usuario
                        </div>
                    </div>
                    
                    <div class="form-floating">
                        <input type="email" class="form-control" id="email" placeholder="Ingresa una dirección de correo electrónico" name="email" autocomplete="email" required >
                        <label for="email" class="form-label col-form-label-sm">Email</label>
                        <div class="invalid-feedback">
                            Ingrese una dirección de correo electrónico
                        </div>
                    </div>
                    <!-- Mensaje de error en email  -->
                    {% if error_message_email %}
                    <div class="error-message">
                        {{ error_message_email }}
                    </div>
                    {% endif %}
                    <div class="form-floating">
                        <input type="password" class="form-control" id="contrasenia" placeholder="Ingresa una contraseña" name="contrasenia" required>
                        <label for="contrasenia" class="form-label col-form-label-sm">Contraseña</label>
                        <div class="invalid-feedback">
                            Ingrese una contraseña
                        </div>
                    </div>
                    
                    <div class="form-floating">
                        <input type="password" class="form-control" id="confirmar-contrasenia" placeholder="Confirma tu contraseña" name="confirmarContrasenia" required>
                        <label for="confirmar-contrasenia"class="form-label col-form-label-sm">Confirmar contraseña</label>
                    </div>
                    <!-- Mensaje de error en contraseña -->
                    {% if error_message_contrasenia %}
                    <div class="error-message">
                        {{ error_message_contrasenia }}
                    </div>
                    {% endif %}
                    <div>
                    <div class="mt-3">
                        <!-- Botones -->
                        <button class="btn btn-primary btn-sm" type="submit">Enviar</button>
                        <a class="btn btn-secondary btn-sm" href="{{ url_for('auth.login') }}">Cancelar</a>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <script>
        // Deshabilitar el envío de formularios si hay campos no válidos
        // Extraido de https://getbootstrap.com/docs/5.3/forms/validation/
    (() => {
        'use strict'
    
        const forms = document.querySelectorAll('.needs-validation')
    
        Array.from(forms).forEach(form => {
            form.addEventListener('submit', event => {
            if (!form.checkValidity()) {
                event.preventDefault()
                event.stopPropagation()
            }
    
            form.classList.add('was-validated')
            }, false)
        })
    })()
    </script>
{% endblock %}