<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Datos del encuestado</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" 
    rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" 
    crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" 
    integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" 
    crossorigin="anonymous"></script>
</head>
<body>
    <!-- Contenedor -->
    <div class="container">
        <div class="row justify-content-center">
            <!-- Mensajes flash -->
            {% with messages = get_flashed_messages() %}
                {% if messages %}
                    <div class="alert alert-danger d-flex col-12 col-lg-8 justify-content-center align-items-center mt-3" role="alert">
                        {% for message in messages %}
                                <svg xmlns="http://www.w3.org/2000/svg" class="bi flex-shrink-0 me-2" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                                    <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
                                </svg>
                                {{ message }}
                        {% endfor %}
                    </div>
                {% endif %}
            {% endwith %}
                <div class="col-12 col-lg-6 mx-auto align-items-center mt-3 mb-3">
                    <!-- Formulario -->
                    <form class="card w-100 needs-validation" action="{{url_for('add_encuestado')}}" method="POST" novalidate>
                        <input type="hidden" value="{{idEncuesta}}" name="idEncuesta">
                        <input type="hidden" value="{{nombreEncuesta}}" name="nombreEncuesta">
                        <div class="card-body">
                            <div class="mb-3">
                                <!-- Ingresar nombre  // Input NO obligatorio-->
                                <label for="nombre" class="form-label">Nombre</label>
                                <input type="text" id="nombre" name="nombre" class="form-control" placeholder="Ingresar nombre/s" maxlength="50">
                            </div>
                            <div class="mb-3">
                                <!-- Ingresar apellido  // Input NO obligatorio-->
                                <label for="apellido" class="form-label">Apellido</label>
                                <input type="text" id="apellido" name="apellido" class="form-control" placeholder="Ingresar apellido/s" maxlength="50">        
                            </div>
                            <div class="mb-3">
                                <!-- Ingresar Edad // Input NO obligatorio-->
                                <label for="edad" class="form-label">Edad</label>
                                <input type="number" id="edad" name="edad" class="form-control" placeholder="Ingresar edad">
                            </div>
                            <div class="mb-3">
                                <!-- Ingresar DNI  // Input obligatorio-->
                                <label for="dni" class="form-label">DNI</label>
                                <input type="text" id="dni" name="dni" class="form-control" placeholder="Ingresar número de documento" maxlength="8" required>        
                                <!-- Mensaje de error si la validación falla-->
                                <div class="invalid-feedback">
                                    Ingresar número de documento
                                </div>
                            </div>
                            <div class="mb-3">
                                <!-- Ingresar N° de trámite del DNI  // Input NO obligatorio-->
                                <label for="numTramiteDNI" class="form-label">N° de trámite del DNI</label>
                                <input type="text" id="numTramiteDNI" name="numTramiteDNI" class="form-control" placeholder="Ingresar número de trámite del documento" maxlength="11">        
                            </div>
                            <!-- Botón de envío del formulario-->
                            <button type="submit" class="btn btn-dark">
                                Guardar
                            </button>
                        </div>
                    </form>
                </div>
        </div>
    </div> 
    <script>
        // Deshabilitar el envío de formularios si hay campos no válidos
        // Extraido de https://getbootstrap.com/docs/5.3/forms/validation/
        (() => {
            'use strict'
    
            const forms = document.querySelectorAll('.needs-validation')
    
            Array.from(forms).forEach(form => {
                form.addEventListener('submit', event => {
                if (!form.checkValidity()) {
                    event.preventDefault()
                    event.stopPropagation()
                }
    
                form.classList.add('was-validated')
                }, false)
            })
        })()
        </script>
</body>
</html>